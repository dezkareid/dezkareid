description = "Gather phase context through adaptive questioning before planning"
prompt = "<objective>\nExtract implementation decisions that downstream agents need — researcher and planner will use CONTEXT.md to know what to investigate and what choices are locked.\n\n**How it works:**\n1. Analyze the phase to identify gray areas (UI, UX, behavior, etc.)\n2. Present gray areas — user selects which to discuss\n3. Deep-dive each selected area until satisfied\n4. Create CONTEXT.md with decisions that guide research and planning\n\n**Output:** `{phase}-CONTEXT.md` — decisions clear enough that downstream agents can act without asking the user again\n</objective>\n\n<execution_context>\n@./.gemini/get-shit-done/workflows/discuss-phase.md\n@./.gemini/get-shit-done/templates/context.md\n</execution_context>\n\n<context>\nPhase number: $ARGUMENTS (required)\n\n**Load project state:**\n@.planning/STATE.md\n\n**Load roadmap:**\n@.planning/ROADMAP.md\n</context>\n\n<process>\n1. Validate phase number (error if missing or not in roadmap)\n2. Check if CONTEXT.md exists (offer update/view/skip if yes)\n3. **Analyze phase** — Identify domain and generate phase-specific gray areas\n4. **Present gray areas** — Multi-select: which to discuss? (NO skip option)\n5. **Deep-dive each area** — 4 questions per area, then offer more/next\n6. **Write CONTEXT.md** — Sections match areas discussed\n7. Offer next steps (research or plan)\n\n**CRITICAL: Scope guardrail**\n- Phase boundary from ROADMAP.md is FIXED\n- Discussion clarifies HOW to implement, not WHETHER to add more\n- If user suggests new capabilities: \"That's its own phase. I'll note it for later.\"\n- Capture deferred ideas — don't lose them, don't act on them\n\n**Domain-aware gray areas:**\nGray areas depend on what's being built. Analyze the phase goal:\n- Something users SEE → layout, density, interactions, states\n- Something users CALL → responses, errors, auth, versioning\n- Something users RUN → output format, flags, modes, error handling\n- Something users READ → structure, tone, depth, flow\n- Something being ORGANIZED → criteria, grouping, naming, exceptions\n\nGenerate 3-4 **phase-specific** gray areas, not generic categories.\n\n**Probing depth:**\n- Ask 4 questions per area before checking\n- \"More questions about [area], or move to next?\"\n- If more → ask 4 more, check again\n- After all areas → \"Ready to create context?\"\n\n**Do NOT ask about (Claude handles these):**\n- Technical implementation\n- Architecture choices\n- Performance concerns\n- Scope expansion\n</process>\n\n<success_criteria>\n- Gray areas identified through intelligent analysis\n- User chose which areas to discuss\n- Each selected area explored until satisfied\n- Scope creep redirected to deferred ideas\n- CONTEXT.md captures decisions, not vague vision\n- User knows next steps\n</success_criteria>"
