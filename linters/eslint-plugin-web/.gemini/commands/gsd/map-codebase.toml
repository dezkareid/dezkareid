description = "Analyze codebase with parallel mapper agents to produce .planning/codebase/ documents"
prompt = "<objective>\nAnalyze existing codebase using parallel gsd-codebase-mapper agents to produce structured codebase documents.\n\nEach mapper agent explores a focus area and **writes documents directly** to `.planning/codebase/`. The orchestrator only receives confirmations, keeping context usage minimal.\n\nOutput: .planning/codebase/ folder with 7 structured documents about the codebase state.\n</objective>\n\n<execution_context>\n@./.gemini/get-shit-done/workflows/map-codebase.md\n</execution_context>\n\n<context>\nFocus area: $ARGUMENTS (optional - if provided, tells agents to focus on specific subsystem)\n\n**Load project state if exists:**\nCheck for .planning/STATE.md - loads context if project already initialized\n\n**This command can run:**\n- Before /gsd:new-project (brownfield codebases) - creates codebase map first\n- After /gsd:new-project (greenfield codebases) - updates codebase map as code evolves\n- Anytime to refresh codebase understanding\n</context>\n\n<when_to_use>\n**Use map-codebase for:**\n- Brownfield projects before initialization (understand existing code first)\n- Refreshing codebase map after significant changes\n- Onboarding to an unfamiliar codebase\n- Before major refactoring (understand current state)\n- When STATE.md references outdated codebase info\n\n**Skip map-codebase for:**\n- Greenfield projects with no code yet (nothing to map)\n- Trivial codebases (<5 files)\n</when_to_use>\n\n<process>\n1. Check if .planning/codebase/ already exists (offer to refresh or skip)\n2. Create .planning/codebase/ directory structure\n3. Spawn 4 parallel gsd-codebase-mapper agents:\n   - Agent 1: tech focus → writes STACK.md, INTEGRATIONS.md\n   - Agent 2: arch focus → writes ARCHITECTURE.md, STRUCTURE.md\n   - Agent 3: quality focus → writes CONVENTIONS.md, TESTING.md\n   - Agent 4: concerns focus → writes CONCERNS.md\n4. Wait for agents to complete, collect confirmations (NOT document contents)\n5. Verify all 7 documents exist with line counts\n6. Commit codebase map\n7. Offer next steps (typically: /gsd:new-project or /gsd:plan-phase)\n</process>\n\n<success_criteria>\n- [ ] .planning/codebase/ directory created\n- [ ] All 7 codebase documents written by mapper agents\n- [ ] Documents follow template structure\n- [ ] Parallel agents completed without errors\n- [ ] User knows next steps\n</success_criteria>"
