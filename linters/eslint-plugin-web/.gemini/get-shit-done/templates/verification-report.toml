prompt = "# Verification Report Template\n\nTemplate for `.planning/phases/XX-name/{phase}-VERIFICATION.md` ‚Äî phase goal verification results.\n\n---\n\n## File Template\n\n```markdown\n---\nphase: XX-name\nverified: YYYY-MM-DDTHH:MM:SSZ\nstatus: passed | gaps_found | human_needed\nscore: N/M must-haves verified\n---\n\n# Phase {X}: {Name} Verification Report\n\n**Phase Goal:** {goal from ROADMAP.md}\n**Verified:** {timestamp}\n**Status:** {passed | gaps_found | human_needed}\n\n## Goal Achievement\n\n### Observable Truths\n\n| # | Truth | Status | Evidence |\n|---|-------|--------|----------|\n| 1 | {truth from must_haves} | ‚úì VERIFIED | {what confirmed it} |\n| 2 | {truth from must_haves} | ‚úó FAILED | {what's wrong} |\n| 3 | {truth from must_haves} | ? UNCERTAIN | {why can't verify} |\n\n**Score:** {N}/{M} truths verified\n\n### Required Artifacts\n\n| Artifact | Expected | Status | Details |\n|----------|----------|--------|---------|\n| `src/components/Chat.tsx` | Message list component | ‚úì EXISTS + SUBSTANTIVE | Exports ChatList, renders Message[], no stubs |\n| `src/app/api/chat/route.ts` | Message CRUD | ‚úó STUB | File exists but POST returns placeholder |\n| `prisma/schema.prisma` | Message model | ‚úì EXISTS + SUBSTANTIVE | Model defined with all fields |\n\n**Artifacts:** {N}/{M} verified\n\n### Key Link Verification\n\n| From | To | Via | Status | Details |\n|------|----|----|--------|---------|\n| Chat.tsx | /api/chat | fetch in useEffect | ‚úì WIRED | Line 23: `fetch('/api/chat')` with response handling |\n| ChatInput | /api/chat POST | onSubmit handler | ‚úó NOT WIRED | onSubmit only calls console.log |\n| /api/chat POST | database | prisma.message.create | ‚úó NOT WIRED | Returns hardcoded response, no DB call |\n\n**Wiring:** {N}/{M} connections verified\n\n## Requirements Coverage\n\n| Requirement | Status | Blocking Issue |\n|-------------|--------|----------------|\n| {REQ-01}: {description} | ‚úì SATISFIED | - |\n| {REQ-02}: {description} | ‚úó BLOCKED | API route is stub |\n| {REQ-03}: {description} | ? NEEDS HUMAN | Can't verify WebSocket programmatically |\n\n**Coverage:** {N}/{M} requirements satisfied\n\n## Anti-Patterns Found\n\n| File | Line | Pattern | Severity | Impact |\n|------|------|---------|----------|--------|\n| src/app/api/chat/route.ts | 12 | `// TODO: implement` | ‚ö†Ô∏è Warning | Indicates incomplete |\n| src/components/Chat.tsx | 45 | `return <div>Placeholder</div>` | üõë Blocker | Renders no content |\n| src/hooks/useChat.ts | - | File missing | üõë Blocker | Expected hook doesn't exist |\n\n**Anti-patterns:** {N} found ({blockers} blockers, {warnings} warnings)\n\n## Human Verification Required\n\n{If no human verification needed:}\nNone ‚Äî all verifiable items checked programmatically.\n\n{If human verification needed:}\n\n### 1. {Test Name}\n**Test:** {What to do}\n**Expected:** {What should happen}\n**Why human:** {Why can't verify programmatically}\n\n### 2. {Test Name}\n**Test:** {What to do}\n**Expected:** {What should happen}\n**Why human:** {Why can't verify programmatically}\n\n## Gaps Summary\n\n{If no gaps:}\n**No gaps found.** Phase goal achieved. Ready to proceed.\n\n{If gaps found:}\n\n### Critical Gaps (Block Progress)\n\n1. **{Gap name}**\n   - Missing: {what's missing}\n   - Impact: {why this blocks the goal}\n   - Fix: {what needs to happen}\n\n2. **{Gap name}**\n   - Missing: {what's missing}\n   - Impact: {why this blocks the goal}\n   - Fix: {what needs to happen}\n\n### Non-Critical Gaps (Can Defer)\n\n1. **{Gap name}**\n   - Issue: {what's wrong}\n   - Impact: {limited impact because...}\n   - Recommendation: {fix now or defer}\n\n## Recommended Fix Plans\n\n{If gaps found, generate fix plan recommendations:}\n\n### {phase}-{next}-PLAN.md: {Fix Name}\n\n**Objective:** {What this fixes}\n\n**Tasks:**\n1. {Task to fix gap 1}\n2. {Task to fix gap 2}\n3. {Verification task}\n\n**Estimated scope:** {Small / Medium}\n\n---\n\n### {phase}-{next+1}-PLAN.md: {Fix Name}\n\n**Objective:** {What this fixes}\n\n**Tasks:**\n1. {Task}\n2. {Task}\n\n**Estimated scope:** {Small / Medium}\n\n---\n\n## Verification Metadata\n\n**Verification approach:** Goal-backward (derived from phase goal)\n**Must-haves source:** {PLAN.md frontmatter | derived from ROADMAP.md goal}\n**Automated checks:** {N} passed, {M} failed\n**Human checks required:** {N}\n**Total verification time:** {duration}\n\n---\n*Verified: {timestamp}*\n*Verifier: Claude (subagent)*\n```\n\n---\n\n## Guidelines\n\n**Status values:**\n- `passed` ‚Äî All must-haves verified, no blockers\n- `gaps_found` ‚Äî One or more critical gaps found\n- `human_needed` ‚Äî Automated checks pass but human verification required\n\n**Evidence types:**\n- For EXISTS: \"File at path, exports X\"\n- For SUBSTANTIVE: \"N lines, has patterns X, Y, Z\"\n- For WIRED: \"Line N: code that connects A to B\"\n- For FAILED: \"Missing because X\" or \"Stub because Y\"\n\n**Severity levels:**\n- üõë Blocker: Prevents goal achievement, must fix\n- ‚ö†Ô∏è Warning: Indicates incomplete but doesn't block\n- ‚ÑπÔ∏è Info: Notable but not problematic\n\n**Fix plan generation:**\n- Only generate if gaps_found\n- Group related fixes into single plans\n- Keep to 2-3 tasks per plan\n- Include verification task in each plan\n\n---\n\n## Example\n\n```markdown\n---\nphase: 03-chat\nverified: 2025-01-15T14:30:00Z\nstatus: gaps_found\nscore: 2/5 must-haves verified\n---\n\n# Phase 3: Chat Interface Verification Report\n\n**Phase Goal:** Working chat interface where users can send and receive messages\n**Verified:** 2025-01-15T14:30:00Z\n**Status:** gaps_found\n\n## Goal Achievement\n\n### Observable Truths\n\n| # | Truth | Status | Evidence |\n|---|-------|--------|----------|\n| 1 | User can see existing messages | ‚úó FAILED | Component renders placeholder, not message data |\n| 2 | User can type a message | ‚úì VERIFIED | Input field exists with onChange handler |\n| 3 | User can send a message | ‚úó FAILED | onSubmit handler is console.log only |\n| 4 | Sent message appears in list | ‚úó FAILED | No state update after send |\n| 5 | Messages persist across refresh | ? UNCERTAIN | Can't verify - send doesn't work |\n\n**Score:** 1/5 truths verified\n\n### Required Artifacts\n\n| Artifact | Expected | Status | Details |\n|----------|----------|--------|---------|\n| `src/components/Chat.tsx` | Message list component | ‚úó STUB | Returns `<div>Chat will be here</div>` |\n| `src/components/ChatInput.tsx` | Message input | ‚úì EXISTS + SUBSTANTIVE | Form with input, submit button, handlers |\n| `src/app/api/chat/route.ts` | Message CRUD | ‚úó STUB | GET returns [], POST returns { ok: true } |\n| `prisma/schema.prisma` | Message model | ‚úì EXISTS + SUBSTANTIVE | Message model with id, content, userId, createdAt |\n\n**Artifacts:** 2/4 verified\n\n### Key Link Verification\n\n| From | To | Via | Status | Details |\n|------|----|----|--------|---------|\n| Chat.tsx | /api/chat GET | fetch | ‚úó NOT WIRED | No fetch call in component |\n| ChatInput | /api/chat POST | onSubmit | ‚úó NOT WIRED | Handler only logs, doesn't fetch |\n| /api/chat GET | database | prisma.message.findMany | ‚úó NOT WIRED | Returns hardcoded [] |\n| /api/chat POST | database | prisma.message.create | ‚úó NOT WIRED | Returns { ok: true }, no DB call |\n\n**Wiring:** 0/4 connections verified\n\n## Requirements Coverage\n\n| Requirement | Status | Blocking Issue |\n|-------------|--------|----------------|\n| CHAT-01: User can send message | ‚úó BLOCKED | API POST is stub |\n| CHAT-02: User can view messages | ‚úó BLOCKED | Component is placeholder |\n| CHAT-03: Messages persist | ‚úó BLOCKED | No database integration |\n\n**Coverage:** 0/3 requirements satisfied\n\n## Anti-Patterns Found\n\n| File | Line | Pattern | Severity | Impact |\n|------|------|---------|----------|--------|\n| src/components/Chat.tsx | 8 | `<div>Chat will be here</div>` | üõë Blocker | No actual content |\n| src/app/api/chat/route.ts | 5 | `return Response.json([])` | üõë Blocker | Hardcoded empty |\n| src/app/api/chat/route.ts | 12 | `// TODO: save to database` | ‚ö†Ô∏è Warning | Incomplete |\n\n**Anti-patterns:** 3 found (2 blockers, 1 warning)\n\n## Human Verification Required\n\nNone needed until automated gaps are fixed.\n\n## Gaps Summary\n\n### Critical Gaps (Block Progress)\n\n1. **Chat component is placeholder**\n   - Missing: Actual message list rendering\n   - Impact: Users see \"Chat will be here\" instead of messages\n   - Fix: Implement Chat.tsx to fetch and render messages\n\n2. **API routes are stubs**\n   - Missing: Database integration in GET and POST\n   - Impact: No data persistence, no real functionality\n   - Fix: Wire prisma calls in route handlers\n\n3. **No wiring between frontend and backend**\n   - Missing: fetch calls in components\n   - Impact: Even if API worked, UI wouldn't call it\n   - Fix: Add useEffect fetch in Chat, onSubmit fetch in ChatInput\n\n## Recommended Fix Plans\n\n### 03-04-PLAN.md: Implement Chat API\n\n**Objective:** Wire API routes to database\n\n**Tasks:**\n1. Implement GET /api/chat with prisma.message.findMany\n2. Implement POST /api/chat with prisma.message.create\n3. Verify: API returns real data, POST creates records\n\n**Estimated scope:** Small\n\n---\n\n### 03-05-PLAN.md: Implement Chat UI\n\n**Objective:** Wire Chat component to API\n\n**Tasks:**\n1. Implement Chat.tsx with useEffect fetch and message rendering\n2. Wire ChatInput onSubmit to POST /api/chat\n3. Verify: Messages display, new messages appear after send\n\n**Estimated scope:** Small\n\n---\n\n## Verification Metadata\n\n**Verification approach:** Goal-backward (derived from phase goal)\n**Must-haves source:** 03-01-PLAN.md frontmatter\n**Automated checks:** 2 passed, 8 failed\n**Human checks required:** 0 (blocked by automated failures)\n**Total verification time:** 2 min\n\n---\n*Verified: 2025-01-15T14:30:00Z*\n*Verifier: Claude (subagent)*\n```\n"
